import{i as Te,g as pe,_ as ge,I as De,b as ce,x as ue,o as Ee,E as re}from"./index.9e213854.js";import{i as j,a4 as te,aR as Se,a5 as Be,ab as Z,aF as Me,Z as le,bj as Pe,aJ as de,R as G,aB as xe,a_ as Ie,bk as Le,a$ as Fe,at as X,U as ae,V as J,d as Y,c as C,a1 as I,aS as Ae,az as $e,a3 as Q,N as $,o as O,e as q,f as H,a2 as A,g as t,ag as Re,w as z,ad as ee,ae as Ne,ah as oe,af as ye,Y as ze,b0 as Oe,r as k,bh as Ye,a8 as _e,P as Ue,bl as Ve,b5 as fe,a9 as He,_ as be,ap as We,ar as W,aQ as je,aq as Xe,av as qe,bm as Ke,aj as Ze,a7 as ve,bc as me}from"./index.9c7545e2.js";import{t as Ge,P as K,F as Je,c as Qe,U as he,a as eo}from"./focus-trap.d4f1d49f.js";let U;const oo=e=>{var l;if(!j)return 0;if(U!==void 0)return U;const s=document.createElement("div");s.className=`${e}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const n=s.offsetWidth;s.style.overflow="scroll";const c=document.createElement("div");c.style.width="100%",s.appendChild(c);const f=c.offsetWidth;return(l=s.parentNode)==null||l.removeChild(s),U=n-f,U};function Mo(e,l){if(!j)return;if(!l){e.scrollTop=0;return}const s=[];let n=l.offsetParent;for(;n!==null&&e!==n&&e.contains(n);)s.push(n),n=n.offsetParent;const c=l.offsetTop+s.reduce((v,g)=>v+g.offsetTop,0),f=c+l.offsetHeight,r=e.scrollTop,u=r+e.clientHeight;c<r?e.scrollTop=c:f>u&&(e.scrollTop=f-e.clientHeight)}const to=(e,l,s)=>{let n={offsetX:0,offsetY:0};const c=u=>{const v=u.clientX,g=u.clientY,{offsetX:d,offsetY:m}=n,b=e.value.getBoundingClientRect(),a=b.left,T=b.top,L=b.width,B=b.height,R=document.documentElement.clientWidth,D=document.documentElement.clientHeight,F=-a+d,M=-T+m,P=R-a-L+d,E=D-T-B+m,x=i=>{const o=Math.min(Math.max(d+i.clientX-v,F),P),p=Math.min(Math.max(m+i.clientY-g,M),E);n={offsetX:o,offsetY:p},e.value.style.transform=`translate(${Z(o)}, ${Z(p)})`},w=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",w)},f=()=>{l.value&&e.value&&l.value.addEventListener("mousedown",c)},r=()=>{l.value&&e.value&&l.value.removeEventListener("mousedown",c)};te(()=>{Se(()=>{s.value?f():r()})}),Be(()=>{r()})},lo=(e,l={})=>{Me(e)||Ge("[useLockscreen]","You need to pass a ref param to this function");const s=l.ns||le("popup"),n=Pe(()=>s.bm("parent","hidden"));if(!j||de(document.body,n.value))return;let c=0,f=!1,r="0";const u=()=>{setTimeout(()=>{Fe(document==null?void 0:document.body,n.value),f&&document&&(document.body.style.width=r)},200)};G(e,v=>{if(!v){u();return}f=!de(document.body,n.value),f&&(r=document.body.style.width),c=oo(s.namespace.value);const g=document.documentElement.clientHeight<document.body.scrollHeight,d=xe(document.body,"overflowY");c>0&&(g||d==="scroll")&&f&&(document.body.style.width=`calc(100% - ${c}px)`),Ie(document.body,n.value)}),Le(()=>u())},Ce=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let l=!1,s=!1;return{onClick:r=>{l&&s&&e(r),l=s=!1},onMousedown:r=>{l=r.target===r.currentTarget},onMouseup:r=>{s=r.target===r.currentTarget}}},ao=ae({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:J([String,Array,Object])},zIndex:{type:J([String,Number])}}),so={click:e=>e instanceof MouseEvent},no="overlay";var io=Y({name:"ElOverlay",props:ao,emits:so,setup(e,{slots:l,emit:s}){const n=le(no),c=v=>{s("click",v)},{onClick:f,onMousedown:r,onMouseup:u}=Ce(e.customMaskEvent?void 0:c);return()=>e.mask?C("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:f,onMousedown:r,onMouseup:u},[I(l,"default")],K.STYLE|K.CLASS|K.PROPS,["onClick","onMouseup","onMousedown"]):Ae("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[I(l,"default")])}});const co=io,we=Symbol("dialogInjectionKey"),ke=ae({center:Boolean,alignCenter:Boolean,closeIcon:{type:Te},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),uo={close:()=>!0},ro=["aria-level"],fo=["aria-label"],vo=["id"],mo=Y({name:"ElDialogContent"}),po=Y({...mo,props:ke,emits:uo,setup(e){const l=e,{t:s}=$e(),{Close:n}=De,{dialogRef:c,headerRef:f,bodyId:r,ns:u,style:v}=Q(we),{focusTrapRef:g}=Q(Je),d=$(()=>[u.b(),u.is("fullscreen",l.fullscreen),u.is("draggable",l.draggable),u.is("align-center",l.alignCenter),{[u.m("center")]:l.center},l.customClass]),m=Qe(g,c),b=$(()=>l.draggable);return to(c,f,b),(a,T)=>(O(),q("div",{ref:t(m),class:A(t(d)),style:ye(t(v)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:f,class:A(t(u).e("header"))},[I(a.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":a.ariaLevel,class:A(t(u).e("title"))},Re(a.title),11,ro)]),a.showClose?(O(),q("button",{key:0,"aria-label":t(s)("el.dialog.close"),class:A(t(u).e("headerbtn")),type:"button",onClick:T[0]||(T[0]=L=>a.$emit("close"))},[C(t(pe),{class:A(t(u).e("close"))},{default:z(()=>[(O(),ee(Ne(a.closeIcon||t(n))))]),_:1},8,["class"])],10,fo)):oe("v-if",!0)],2),H("div",{id:t(r),class:A(t(u).e("body"))},[I(a.$slots,"default")],10,vo),a.$slots.footer?(O(),q("footer",{key:0,class:A(t(u).e("footer"))},[I(a.$slots,"footer")],2)):oe("v-if",!0)],6))}});var go=ge(po,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const yo=ae({...ke,appendToBody:Boolean,beforeClose:{type:J(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),bo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[he]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ho=(e,l)=>{const n=Ue().emit,{nextZIndex:c}=Oe();let f="";const r=ce(),u=ce(),v=k(!1),g=k(!1),d=k(!1),m=k(e.zIndex||c());let b,a;const T=Ye("namespace",Ve),L=$(()=>{const y={},S=`--${T.value}-dialog`;return e.fullscreen||(e.top&&(y[`${S}-margin-top`]=e.top),e.width&&(y[`${S}-width`]=Z(e.width))),y}),B=$(()=>e.alignCenter?{display:"flex"}:{});function R(){n("opened")}function D(){n("closed"),n(he,!1),e.destroyOnClose&&(d.value=!1)}function F(){n("close")}function M(){a==null||a(),b==null||b(),e.openDelay&&e.openDelay>0?{stop:b}=fe(()=>w(),e.openDelay):w()}function P(){b==null||b(),a==null||a(),e.closeDelay&&e.closeDelay>0?{stop:a}=fe(()=>i(),e.closeDelay):i()}function E(){function y(S){S||(g.value=!0,v.value=!1)}e.beforeClose?e.beforeClose(y):P()}function x(){e.closeOnClickModal&&E()}function w(){!j||(v.value=!0)}function i(){v.value=!1}function o(){n("openAutoFocus")}function p(){n("closeAutoFocus")}function h(y){var S;((S=y.detail)==null?void 0:S.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&lo(v);function N(){e.closeOnPressEscape&&E()}return G(()=>e.modelValue,y=>{y?(g.value=!1,M(),d.value=!0,m.value=e.zIndex?m.value++:c(),_e(()=>{n("open"),l.value&&(l.value.scrollTop=0)})):v.value&&P()}),G(()=>e.fullscreen,y=>{!l.value||(y?(f=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=f)}),te(()=>{e.modelValue&&(v.value=!0,d.value=!0,M())}),{afterEnter:R,afterLeave:D,beforeLeave:F,handleClose:E,onModalClick:x,close:P,doClose:i,onOpenAutoFocus:o,onCloseAutoFocus:p,onCloseRequested:N,onFocusoutPrevented:h,titleId:r,bodyId:u,closed:g,style:L,overlayDialogStyle:B,rendered:d,visible:v,zIndex:m}},Co=["aria-label","aria-labelledby","aria-describedby"],wo=Y({name:"ElDialog",inheritAttrs:!1}),ko=Y({...wo,props:yo,emits:bo,setup(e,{expose:l}){const s=e,n=He();ue({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!n.title)),ue({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},$(()=>!!s.customClass));const c=le("dialog"),f=k(),r=k(),u=k(),{visible:v,titleId:g,bodyId:d,style:m,overlayDialogStyle:b,rendered:a,zIndex:T,afterEnter:L,afterLeave:B,beforeLeave:R,handleClose:D,onModalClick:F,onOpenAutoFocus:M,onCloseAutoFocus:P,onCloseRequested:E,onFocusoutPrevented:x}=ho(s,f);be(we,{dialogRef:f,headerRef:r,bodyId:d,ns:c,rendered:a,style:m});const w=Ce(F),i=$(()=>s.draggable&&!s.fullscreen);return l({visible:v,dialogContentRef:u}),(o,p)=>(O(),ee(Ke,{to:"body",disabled:!o.appendToBody},[C(qe,{name:"dialog-fade",onAfterEnter:t(L),onAfterLeave:t(B),onBeforeLeave:t(R),persisted:""},{default:z(()=>[We(C(t(co),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":t(T)},{default:z(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:t(g),"aria-describedby":t(d),class:A(`${t(c).namespace.value}-overlay-dialog`),style:ye(t(b)),onClick:p[0]||(p[0]=(...h)=>t(w).onClick&&t(w).onClick(...h)),onMousedown:p[1]||(p[1]=(...h)=>t(w).onMousedown&&t(w).onMousedown(...h)),onMouseup:p[2]||(p[2]=(...h)=>t(w).onMouseup&&t(w).onMouseup(...h))},[C(t(eo),{loop:"",trapped:t(v),"focus-start-el":"container",onFocusAfterTrapped:t(M),onFocusAfterReleased:t(P),onFocusoutPrevented:t(x),onReleaseRequested:t(E)},{default:z(()=>[t(a)?(O(),ee(go,W({key:0,ref_key:"dialogContentRef",ref:u},o.$attrs,{"custom-class":o.customClass,center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:t(i),fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:t(D)}),je({header:z(()=>[o.$slots.title?I(o.$slots,"title",{key:1}):I(o.$slots,"header",{key:0,close:t(D),titleId:t(g),titleClass:t(c).e("title")})]),default:z(()=>[I(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:z(()=>[I(o.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):oe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Co)]),_:3},8,["mask","overlay-class","z-index"]),[[Xe,t(v)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var To=ge(ko,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Do=Ze(To),V={request:{code:{success:[200],error:{0:"\u670D\u672A\u77E5\u9519\u8BEF",300:"\u672A\u77E5\u9519\u8BEF",404:"\u672A\u627E\u5230\u8BE5\u8D44\u6E90",500:"\u670D\u52A1\u5668\u9519\u8BEF"}},status:{success:[200],error:{500:"\u670D\u52A1\u5668\u9519\u8BEF",404:"\u672A\u627E\u5230\u6539\u8D44\u6E90"}}},form:{eventTrigger:{Select:"change",Input:"blur",DatePicker:"change",Radio:"change",CheckBox:"change",Rate:"change",Switch:"change",Upload:"change",DateRangePicker:"change",default:"change"},labelMessage:{Select:"\u8BF7\u9009\u62E9",DatePicker:"\u8BF7\u9009\u62E9",Radio:"\u8BF7\u9009\u62E9",Input:"\u8BF7\u8F93\u5165",CheckBox:"\u8BF7\u9009\u62E9",Rate:"\u8BF7\u9009\u62E9",Switch:"\u8BF7\u9009\u62E9",Upload:"\u8BF7\u9009\u62E9",DateRangePicker:"\u8BF7\u9009\u62E9",default:"\u8BF7\u9009\u62E9"}},dialog:{cancelText:"\u5173\u95ED",confirmText:"\u786E\u8BA4"},table:{total(e){return(e==null?void 0:e.count)||0},pagination(e){return{page:{pageSize:e.pageSize,pageNo:e.currentPage}}}}};const Po=Y({props:{title:{type:String},confirm:{type:Function},cancel:{type:Function},width:{type:Number},elProps:{type:Object},disabled:{type:Boolean,default:()=>!1},freeze:{type:Boolean,default:()=>!1},confirmText:{type:String},cancelText:{type:String}},emits:{valid:()=>{}},setup(e,l){const{width:s,elProps:n,title:c,confirm:f,cancel:r,disabled:u}=e,v=k(""),g=k(!1),d=k(!1),m=k(!1),b=l.slots;let a=k(null);const T=$(()=>g.value||e.disabled);be("DialogProvider",{setFormInstance(i){a.value=i},disabled:T});function L(i,o){var p,h,N,y,S,se,ne,ie;if(m.value=!0,a.value&&!e.freeze){i&&((h=(p=a.value)==null?void 0:p.exposed)==null||h.setApi(i)),o&&((y=(N=a.value)==null?void 0:N.exposed)==null||y.setData(o)),(se=(S=a.value)==null?void 0:S.exposed)!=null&&se.validate&&((ie=(ne=a.value)==null?void 0:ne.exposed)==null||ie.validate(_=>{_||_===void 0?(m.value=!1,d.value=!1):m.value=!1}));return}if(e.confirm){e.confirm(_=>{_||_===void 0?(m.value=!1,d.value=!1):m.value=!1});return}m.value=!1,d.value=!1}function B(){var i,o,p,h;a.value&&(o=(i=a.value)==null?void 0:i.exposed)!=null&&o.validate&&((h=(p=a.value)==null?void 0:p.exposed)==null||h.reset())}const R={header:()=>C("div",null,[C("div",{class:"dialog-header"},[C("span",null,[v.value||e.title||"\u6807\u9898"]),C("div",{onClick:()=>{d.value=!1,m.value=!1}},[C(pe,null,{default:()=>[C(Ee,{class:"pointer"},null)]})])])]),footer:()=>g.value||e.disabled?"":C(ve,null,[M.value.map(i=>i())])},D=k(""),F={cancel:(i,o)=>()=>C(re,W(i,{disabled:t(m),onClick:()=>{e.cancel&&e.cancel(),B(),d.value=!1,m.value=!1}}),{default:()=>[o||e.cancelText||V.dialog.cancelText||"\u53D6\u6D88"]}),confirm:(i,o)=>()=>C(re,W({type:"primary"},i,{onClick:()=>{L(o.api,o.customData),D.value=o.label||"\u786E\u8BA4"},disabled:t(m)&&(o.label||e.confirmText||V.dialog.confirmText||"\u786E\u8BA4")!==D.value,loading:t(m)&&(o.label||e.confirmText||V.dialog.confirmText||"\u786E\u8BA4")===D.value}),{default:()=>[o.label||e.confirmText||V.dialog.confirmText||"\u786E\u8BA4"]})},M=k([]),P=[{label:"\u53D6\u6D88",function:"cancel",type:"default"},{label:"\u786E\u5B9A",function:"confirm",type:"primary"}];function E(i={}){v.value=i.title||"",g.value=i.disabled||!1,d.value=!0,M.value=(i.action||P).map(o=>{if(o.function==="cancel"&&!o.render)return F.cancel(me(o,["function","label"]),o.label);if(o.function==="confirm"&&!o.render)return F.confirm(me(o,["function","label","api","customData"]),{label:o.label,api:o.api,customData:o.customData});if(o.render)return o.render}),setTimeout(()=>{var o,p,h,N,y;i.data&&((o=a==null?void 0:a.value)==null?void 0:o.exposed)&&((h=(p=a==null?void 0:a.value)==null?void 0:p.exposed)==null||h.setData(i.data),i.api&&((y=(N=a==null?void 0:a.value)==null?void 0:N.exposed)==null||y.setApi(i.api)))},50)}function x(){e.cancel&&e.cancel(),B(),d.value=!1,m.value=!1}l.expose({open:E,close:x});const w=Q("GetDialogInstance",{});return te(()=>{w.setDialogInstance&&w.setDialogInstance({open:E,close:x})}),()=>C(ve,null,[C(Do,W(n,{modelValue:d.value,"onUpdate:modelValue":i=>d.value=i,width:s,"append-to-body":!0,onClose:()=>{B()},"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}),{default:()=>[b.default&&b.default()||""],...R})])}});export{Po as D,V as a,oo as g,Mo as s};
