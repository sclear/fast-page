import{i as he,g as ce,_ as ue,D as be,b as ee,x as oe,o as Ce,E as te}from"./index.90209fed.js";import{i as U,a4 as J,aR as we,a5 as ke,ab as j,aF as Te,Z as G,bh as Ee,aJ as le,R as X,aB as Se,aY as De,bi as Be,aZ as Me,at as V,U as Q,V as q,d as z,c as y,a1 as M,aS as Ie,az as Pe,a3 as ae,N as L,o as N,e as H,f as _,a2 as P,g as o,ag as Le,w as x,ad as K,ae as Fe,ah as Z,af as re,Y as $e,a_ as Ae,r as T,bf as Re,a8 as xe,P as Oe,bj as Ne,b2 as se,a9 as ze,_ as de,ap as Ye,ar as fe,aQ as _e,aq as Ue,av as Ve,bk as He,aj as We,a7 as ne}from"./index.acb06b61.js";import{t as je,P as W,F as Xe,c as qe,U as me,a as Ke}from"./focus-trap.a571ec6d.js";let Y;const Ze=e=>{var t;if(!U)return 0;if(Y!==void 0)return Y;const l=document.createElement("div");l.className=`${e}-scrollbar__wrap`,l.style.visibility="hidden",l.style.width="100px",l.style.position="absolute",l.style.top="-9999px",document.body.appendChild(l);const a=l.offsetWidth;l.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",l.appendChild(n);const d=n.offsetWidth;return(t=l.parentNode)==null||t.removeChild(l),Y=a-d,Y};function To(e,t){if(!U)return;if(!t){e.scrollTop=0;return}const l=[];let a=t.offsetParent;for(;a!==null&&e!==a&&e.contains(a);)l.push(a),a=a.offsetParent;const n=t.offsetTop+l.reduce((f,p)=>f+p.offsetTop,0),d=n+t.offsetHeight,c=e.scrollTop,i=c+e.clientHeight;n<c?e.scrollTop=n:d>i&&(e.scrollTop=d-e.clientHeight)}const Je=(e,t,l)=>{let a={offsetX:0,offsetY:0};const n=i=>{const f=i.clientX,p=i.clientY,{offsetX:u,offsetY:m}=a,g=e.value.getBoundingClientRect(),s=g.left,E=g.top,B=g.width,F=g.height,$=document.documentElement.clientWidth,v=document.documentElement.clientHeight,S=-s+u,C=-E+m,h=$-s-B+u,b=v-E-F+m,O=I=>{const r=Math.min(Math.max(u+I.clientX-f,S),h),D=Math.min(Math.max(m+I.clientY-p,C),b);a={offsetX:r,offsetY:D},e.value.style.transform=`translate(${j(r)}, ${j(D)})`},w=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",w)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",n)},c=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",n)};J(()=>{we(()=>{l.value?d():c()})}),ke(()=>{c()})},Ge=(e,t={})=>{Te(e)||je("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||G("popup"),a=Ee(()=>l.bm("parent","hidden"));if(!U||le(document.body,a.value))return;let n=0,d=!1,c="0";const i=()=>{setTimeout(()=>{Me(document==null?void 0:document.body,a.value),d&&document&&(document.body.style.width=c)},200)};X(e,f=>{if(!f){i();return}d=!le(document.body,a.value),d&&(c=document.body.style.width),n=Ze(l.namespace.value);const p=document.documentElement.clientHeight<document.body.scrollHeight,u=Se(document.body,"overflowY");n>0&&(p||u==="scroll")&&d&&(document.body.style.width=`calc(100% - ${n}px)`),De(document.body,a.value)}),Be(()=>i())},ve=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let t=!1,l=!1;return{onClick:c=>{t&&l&&e(c),t=l=!1},onMousedown:c=>{t=c.target===c.currentTarget},onMouseup:c=>{l=c.target===c.currentTarget}}},Qe=Q({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),eo={click:e=>e instanceof MouseEvent},oo="overlay";var to=z({name:"ElOverlay",props:Qe,emits:eo,setup(e,{slots:t,emit:l}){const a=G(oo),n=f=>{l("click",f)},{onClick:d,onMousedown:c,onMouseup:i}=ve(e.customMaskEvent?void 0:n);return()=>e.mask?y("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:c,onMouseup:i},[M(t,"default")],W.STYLE|W.CLASS|W.PROPS,["onClick","onMouseup","onMousedown"]):Ie("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(t,"default")])}});const lo=to,pe=Symbol("dialogInjectionKey"),ge=Q({center:Boolean,alignCenter:Boolean,closeIcon:{type:he},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),ao={close:()=>!0},so=["aria-level"],no=["aria-label"],io=["id"],co=z({name:"ElDialogContent"}),uo=z({...co,props:ge,emits:ao,setup(e){const t=e,{t:l}=Pe(),{Close:a}=be,{dialogRef:n,headerRef:d,bodyId:c,ns:i,style:f}=ae(pe),{focusTrapRef:p}=ae(Xe),u=L(()=>[i.b(),i.is("fullscreen",t.fullscreen),i.is("draggable",t.draggable),i.is("align-center",t.alignCenter),{[i.m("center")]:t.center},t.customClass]),m=qe(p,n),g=L(()=>t.draggable);return Je(n,d,g),(s,E)=>(N(),H("div",{ref:o(m),class:P(o(u)),style:re(o(f)),tabindex:"-1"},[_("header",{ref_key:"headerRef",ref:d,class:P(o(i).e("header"))},[M(s.$slots,"header",{},()=>[_("span",{role:"heading","aria-level":s.ariaLevel,class:P(o(i).e("title"))},Le(s.title),11,so)]),s.showClose?(N(),H("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:P(o(i).e("headerbtn")),type:"button",onClick:E[0]||(E[0]=B=>s.$emit("close"))},[y(o(ce),{class:P(o(i).e("close"))},{default:x(()=>[(N(),K(Fe(s.closeIcon||o(a))))]),_:1},8,["class"])],10,no)):Z("v-if",!0)],2),_("div",{id:o(c),class:P(o(i).e("body"))},[M(s.$slots,"default")],10,io),s.$slots.footer?(N(),H("footer",{key:0,class:P(o(i).e("footer"))},[M(s.$slots,"footer")],2)):Z("v-if",!0)],6))}});var ro=ue(uo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const fo=Q({...ge,appendToBody:Boolean,beforeClose:{type:q(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),mo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[me]:e=>$e(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},vo=(e,t)=>{const a=Oe().emit,{nextZIndex:n}=Ae();let d="";const c=ee(),i=ee(),f=T(!1),p=T(!1),u=T(!1),m=T(e.zIndex||n());let g,s;const E=Re("namespace",Ne),B=L(()=>{const k={},R=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(k[`${R}-margin-top`]=e.top),e.width&&(k[`${R}-width`]=j(e.width))),k}),F=L(()=>e.alignCenter?{display:"flex"}:{});function $(){a("opened")}function v(){a("closed"),a(me,!1),e.destroyOnClose&&(u.value=!1)}function S(){a("close")}function C(){s==null||s(),g==null||g(),e.openDelay&&e.openDelay>0?{stop:g}=se(()=>w(),e.openDelay):w()}function h(){g==null||g(),s==null||s(),e.closeDelay&&e.closeDelay>0?{stop:s}=se(()=>I(),e.closeDelay):I()}function b(){function k(R){R||(p.value=!0,f.value=!1)}e.beforeClose?e.beforeClose(k):h()}function O(){e.closeOnClickModal&&b()}function w(){!U||(f.value=!0)}function I(){f.value=!1}function r(){a("openAutoFocus")}function D(){a("closeAutoFocus")}function A(k){var R;((R=k.detail)==null?void 0:R.focusReason)==="pointer"&&k.preventDefault()}e.lockScroll&&Ge(f);function ye(){e.closeOnPressEscape&&b()}return X(()=>e.modelValue,k=>{k?(p.value=!1,C(),u.value=!0,m.value=e.zIndex?m.value++:n(),xe(()=>{a("open"),t.value&&(t.value.scrollTop=0)})):f.value&&h()}),X(()=>e.fullscreen,k=>{!t.value||(k?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),J(()=>{e.modelValue&&(f.value=!0,u.value=!0,C())}),{afterEnter:$,afterLeave:v,beforeLeave:S,handleClose:b,onModalClick:O,close:h,doClose:I,onOpenAutoFocus:r,onCloseAutoFocus:D,onCloseRequested:ye,onFocusoutPrevented:A,titleId:c,bodyId:i,closed:p,style:B,overlayDialogStyle:F,rendered:u,visible:f,zIndex:m}},po=["aria-label","aria-labelledby","aria-describedby"],go=z({name:"ElDialog",inheritAttrs:!1}),yo=z({...go,props:fo,emits:mo,setup(e,{expose:t}){const l=e,a=ze();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},L(()=>!!l.customClass));const n=G("dialog"),d=T(),c=T(),i=T(),{visible:f,titleId:p,bodyId:u,style:m,overlayDialogStyle:g,rendered:s,zIndex:E,afterEnter:B,afterLeave:F,beforeLeave:$,handleClose:v,onModalClick:S,onOpenAutoFocus:C,onCloseAutoFocus:h,onCloseRequested:b,onFocusoutPrevented:O}=vo(l,d);de(pe,{dialogRef:d,headerRef:c,bodyId:u,ns:n,rendered:s,style:m});const w=ve(S),I=L(()=>l.draggable&&!l.fullscreen);return t({visible:f,dialogContentRef:i}),(r,D)=>(N(),K(He,{to:"body",disabled:!r.appendToBody},[y(Ve,{name:"dialog-fade",onAfterEnter:o(B),onAfterLeave:o(F),onBeforeLeave:o($),persisted:""},{default:x(()=>[Ye(y(o(lo),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":o(E)},{default:x(()=>[_("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:o(p),"aria-describedby":o(u),class:P(`${o(n).namespace.value}-overlay-dialog`),style:re(o(g)),onClick:D[0]||(D[0]=(...A)=>o(w).onClick&&o(w).onClick(...A)),onMousedown:D[1]||(D[1]=(...A)=>o(w).onMousedown&&o(w).onMousedown(...A)),onMouseup:D[2]||(D[2]=(...A)=>o(w).onMouseup&&o(w).onMouseup(...A))},[y(o(Ke),{loop:"",trapped:o(f),"focus-start-el":"container",onFocusAfterTrapped:o(C),onFocusAfterReleased:o(h),onFocusoutPrevented:o(O),onReleaseRequested:o(b)},{default:x(()=>[o(s)?(N(),K(ro,fe({key:0,ref_key:"dialogContentRef",ref:i},r.$attrs,{"custom-class":r.customClass,center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:o(I),fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,"aria-level":r.headerAriaLevel,onClose:o(v)}),_e({header:x(()=>[r.$slots.title?M(r.$slots,"title",{key:1}):M(r.$slots,"header",{key:0,close:o(v),titleId:o(p),titleClass:o(n).e("title")})]),default:x(()=>[M(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:x(()=>[M(r.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,po)]),_:3},8,["mask","overlay-class","z-index"]),[[Ue,o(f)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ho=ue(yo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const bo=We(ho);const ie={form:{eventTrigger:{Select:"change",Input:"blur",DatePicker:"change",Radio:"change",CheckBox:"change",Rate:"change",Switch:"change",Upload:"change",DateRangePicker:"change",default:"change"},labelMessage:{Select:"\u8BF7\u9009\u62E9",DatePicker:"\u8BF7\u9009\u62E9",Radio:"\u8BF7\u9009\u62E9",Input:"\u8BF7\u8F93\u5165",CheckBox:"\u8BF7\u9009\u62E9",Rate:"\u8BF7\u9009\u62E9",Switch:"\u8BF7\u9009\u62E9",Upload:"\u8BF7\u9009\u62E9",DateRangePicker:"\u8BF7\u9009\u62E9",default:"\u8BF7\u9009\u62E9"}},dialog:{cancelText:"\u5173\u95ED",confirmText:"\u786E\u8BA4"},table:{total(e){return(e==null?void 0:e.count)||0},pagination(e){return{page:{pageSize:e.pageSize,pageNo:e.currentPage}}}}},Eo=z({props:{title:{type:String},confirm:{type:Function},cancel:{type:Function},width:{type:Number},elProps:{type:Object},disabled:{type:Boolean,default:()=>!1},freeze:{type:Boolean,default:()=>!1},confirmText:{type:String},cancelText:{type:String}},emits:{valid:()=>{}},setup(e,t){const{width:l,elProps:a,title:n,confirm:d,cancel:c,disabled:i}=e,f=T(""),p=T(!1),u=T(!1),m=T(!1),g=t.slots;let s=T(null);J(()=>{});function E(){var v,S,C,h;if(m.value=!0,s.value&&!e.freeze){(S=(v=s.value)==null?void 0:v.exposed)!=null&&S.validate&&((h=(C=s.value)==null?void 0:C.exposed)==null||h.validate(b=>{b||b===void 0?(m.value=!1,u.value=!1):m.value=!1}));return}if(e.confirm){e.confirm(b=>{b||b===void 0?(m.value=!1,u.value=!1):m.value=!1});return}m.value=!1,u.value=!1}function B(){var v,S,C,h;s.value&&(S=(v=s.value)==null?void 0:v.exposed)!=null&&S.validate&&((h=(C=s.value)==null?void 0:C.exposed)==null||h.reset())}const F={header:()=>y("div",null,[y("div",{class:"dialog-header"},[y("span",null,[f.value||e.title||"\u6807\u9898"]),y("div",{onClick:()=>{u.value=!1,m.value=!1}},[y(ce,null,{default:()=>[y(Ce,{class:"pointer"},null)]})])])]),footer:()=>p.value||e.disabled?"":y(ne,null,[y(te,{onClick:()=>{e.cancel&&e.cancel(),B(),u.value=!1,m.value=!1}},{default:()=>[e.cancelText||ie.dialog.cancelText||"\u53D6\u6D88"]}),y(te,{type:"primary",onClick:E,loading:m.value},{default:()=>[e.confirmText||ie.dialog.confirmText||"\u786E\u5B9A"]})])};t.expose({open(v={}){f.value=v.title||"",p.value=v.disabled||!1,u.value=!0},close(){e.cancel&&e.cancel(),B(),u.value=!1,m.value=!1}});const $=L(()=>p.value||e.disabled);return de("renderDialog",{setFormInstance(v){console.log(s),s.value=v},disabled:$}),()=>y(ne,null,[y(bo,fe(a,{modelValue:u.value,"onUpdate:modelValue":v=>u.value=v,width:l,"append-to-body":!0,onClose:()=>{B()},"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}),{default:()=>[g.default&&g.default()||""],...F})])}});export{Eo as D,ie as a,To as s};
